# üîÆ Predictive Processing: Empathy Feedback Loop

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ (–≠—Ç–∞–ø 2.2)  
**–î–∞—Ç–∞**: 23.02.2026  
**–í–µ—Ä—Å–∏—è**: 3.0 (TEC + Bifurcation Engine + LC-NE Integration)

> ‚ö†Ô∏è –£—Å—Ç–∞—Ä–µ–≤—à–∞—è –ª–æ–≥–∏–∫–∞: —Å–∏—Å—Ç–µ–º–∞ –±–æ–ª—å—à–µ **–Ω–µ** —É—Å–∏–ª–∏–≤–∞–µ—Ç `Volitional Pattern`, –∫–æ–≥–¥–∞ PE –Ω–∏–∑–æ–∫. –ö–∞–∂–¥–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å–Ω–∏–∂–∞–µ—Ç `TEC` (–∑–∞–ø–∞—Å –≤–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç–∏). –°–º. [attention-engagement-theory.md](./attention-engagement-theory.md).

---

## üéØ –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

**Predictive Processing** ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç R-Bot **–ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â—É—é —Ä–µ–∞–∫—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–æ—à–∏–±–∫—É –ø—Ä–æ–≥–Ω–æ–∑–∞** (prediction error) –¥–ª—è –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è.

V3.0 –≤–≤–æ–¥–∏—Ç **Topic Engagement Capacity (TEC)** ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –æ—à–∏–±–∫—É **"–ò–Ω–¥—é—à–∫–∏ –î–Ω—è –ë–ª–∞–≥–æ–¥–∞—Ä–µ–Ω–∏—è"** (—ç–∫—Å—Ç—Ä–∞–ø–æ–ª—è—Ü–∏—è —Ç—Ä–µ–Ω–¥–∞ –±–µ–∑ —É—á—ë—Ç–∞ –¥–µ–ø–ª–µ—Ü–∏–∏ –≤–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç–∏).

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```mermaid
graph TB
    A[User Message 1] --> B[Bot generates response]
    B --> C[LLM: predict user NEXT reaction]
    C --> D[Save prediction to DB]
    D --> E1[Update TEC: topic fatigue decay]
    E1 --> E2[Update Tonic NE if TEC low]
    E2 --> E[Bot sends response]

    F[User Message 2 arrives] --> G[Get last prediction]
    G --> H[Calculate cosine distance]
    H --> I{Prediction Error}

    I -->|PE < 0.2| J[Success: Reinforce Pattern]
    J --> J2[BUT: cap reinforcement if TEC < 0.5]
    I -->|PE > 0.5| K[Fail: Weaken Pattern]
    I -->|TEC < 0.3| L[Bifurcation Engine: predict topic switch]
    L --> M[Proactive Mirroring]
```

---

## üì¶ Topic Engagement Capacity (TEC)

**TEC** ‚Äî –Ω–æ–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `[0.0, 1.0]` –≤ –∫–∞–∂–¥–æ–º `Volitional Pattern`, –æ—Ç—Ä–∞–∂–∞—é—â–∞—è —Ç–µ–∫—É—â–∏–π ¬´–∑–∞–ø–∞—Å –≤–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç–∏¬ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ç–µ–º—É.

### –î–∏–Ω–∞–º–∏–∫–∞ decay

```
effective_decay = base_decay √ó (0.5 + (1 - PE) √ó 0.5) √ó (2.0 - response_density)
```

- `base_decay` ‚âà 0.10‚Äì0.15 –∑–∞ —Ö–æ–¥
- `response_density = min(len(user_words) / 50.0, 1.0)` ‚Äî proxy –≤–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç–∏
- –¢–µ–º–∞ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–∞—è + –∫–æ—Ä–æ—Ç–∫–∏–µ –æ—Ç–≤–µ—Ç—ã ‚Üí –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π decay

### –ü–æ–ø—Ä–∞–≤–∫–∞ –æ—à–∏–±–∫–∏ –ò–Ω–¥—é—à–∫–∏ –≤ PE-–ª–æ–≥–∏–∫–µ

**–°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞** (—É–¥–∞–ª–µ–Ω–∞):
```
PE –Ω–∏–∑–æ–∫ ‚Üí –ø–∞—Ç—Ç–µ—Ä–Ω —É—Å–∏–ª–∏–≤–∞–µ—Ç—Å—è ‚Üí –±–æ—Ç —É–≤–µ—Ä–µ–Ω¬≤: —Ç–µ–º–∞ X –±—É–¥–µ—Ç –≤—Å–µ–≥–¥–∞
```

**–ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞** (v3.0):
```
PE –Ω–∏–∑–æ–∫ ‚Üí TEC decay –≤—ã—Å–æ–∫ ‚Üí reinforcement –æ–≥—Ä–∞–Ω–∏—á–µ–Ω, –µ—Å–ª–∏ TEC < 0.5
                              ‚Üí –ø—Ä–∏ TEC < 0.3: Bifurcation Engine –≤–∫–ª—é—á–∞–µ—Ç—Å—è
```

### –£—Ä–æ–≤–Ω–∏ TEC –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

| TEC | –°–æ—Å—Ç–æ—è–Ω–∏–µ | PE-–ª–æ–≥–∏–∫–∞ | Tonic NE | –î–µ–π—Å—Ç–≤–∏–µ |
|-----|-----------|----------|----------|----------|
| `> 0.7` | üü¢ –í—ã—Å–æ–∫–∞—è –≤–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è | –ù–æ—Ä–º–∞ | Exploitation |
| `0.3‚Äì0.7` | üü° –ò—Å—Ç–æ—â–µ–Ω–∏–µ | Reinforcement —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è | –ù–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Ä–∞—Å—Ç—ë—Ç | –í–Ω—É—Ç—Ä–∏—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ |
| `< 0.3` | üî¥ –¢–µ–º–∞ –∏—Å—Ç–æ—â–µ–Ω–∞ | Reinforcement –∑–∞–º–æ—Ä–æ–∂–µ–Ω | –ë—É—Å—Ç | Bifurcation Engine |

---

## üîÄ LC-NE Integration: –¥–≤–∞ —Ä–µ–∂–∏–º–∞ –¥–∏–∞–ª–æ–≥–∞

*–û—Å–Ω–æ–≤–∞: –¢–µ–æ—Ä–∏—è Locus Coeruleus-Norepinephrine (Aston-Jones & Cohen, 2005)*

### Phasic Mode (Exploitation ‚Äî —É–≥–ª—É–±–ª–µ–Ω–∏–µ –≤ —Ç–µ–º—É)
**–ö–æ–≥–¥–∞**: `TEC > 0.5`.
**–°–∏—Å—Ç–µ–º–∞**: NE –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä–æ—Ç–∫–∏–º–∏ —Ñ–∞–∑–∏—á–µ—Å–∫–∏–º–∏ –≤—Å–ø–ª–µ—Å–∫–∞–º–∏ –≤ –æ—Ç–≤–µ—Ç –Ω–∞ —Ä–µ–ø–ª–∏–∫–∏ ‚Äî —Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞ —Ç–µ–∫—É—â–µ–π —Ç–µ–º–µ.
**–ê—Ä—Ö–µ—Ç–∏–ø** R-Core: `JOY` –∏–ª–∏ `CALM`.

### Tonic Mode (Exploration ‚Äî –ø–æ–∏—Å–∫ –Ω–æ–≤–æ–π —Ç–µ–º—ã)
**–ö–æ–≥–¥–∞**: `TEC < 0.3` ‚Üí Tonic NE –±—É—Å—Ç: `NE += (0.3 - TEC) √ó 2.5`.
**–°–∏—Å—Ç–µ–º–∞**: –≤—ã—Å–æ–∫–∏–π —Ç–æ–Ω–∏—á–µ—Å–∫–∏–π NE –≤—ã–∑—ã–≤–∞–µ—Ç ¬´—Å–±—Ä–æ—Å —Å–µ—Ç–∏¬ª ‚Äî –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –≤–Ω–∏–º–∞–Ω–∏–µ –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞.
**–ê—Ä—Ö–µ—Ç–∏–ø** R-Core: `SURPRISE/SEEKING`.

> –í–∞–∂–Ω–æ: –ø–æ—Å–∫–æ–ª—å–∫—É —Å–∏—Å—Ç–µ–º–∞ —Å–∞–º–∞ —Å–¥–≤–∏–≥–∞–µ—Ç—Å—è –≤ `SURPRISE/SEEKING` –ø—Ä–∏ –Ω–∏–∑–∫–æ–º TEC ‚Äî –æ–Ω–∞ **—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è** —Å –Ω–µ–π—Ä–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

---

## üç≥ –ê–Ω—Ç–∏-–°—Ç–∞–≥–Ω–∞—Ü–∏—è: Topic Fatigue ‚Üí Bifurcation Engine

–°—Ç–∞—Ä—ã–π –º–µ—Ö–∞–Ω–∏–∑–º Chaos Injection (¬´`TTL <= 0` ‚Üí –±—É—Å—Ç Uncertainty Agent¬ª) –æ—Å—Ç–∞—ë—Ç—Å—è, –Ω–æ –¥–æ–ø–æ–ª–Ω—è–µ—Ç—Å—è **Bifurcation Engine** ‚Äî –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–º –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ–º **–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è** –ø—Ä—ã–∂–∫–∞.

### –£–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–º–µ–Ω—ã —Ç–µ–º—ã:

| –£—Å–ª–æ–≤–∏–µ | –î–µ–π—Å—Ç–≤–∏–µ |
|---------|----------|
| `TEC < 0.3` |–∞–Ω–∞–ª–∏–∑ `semantic_memory` + `Anchors` + `chat_history` |
| `Tonic_NE > 0.5` | –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –ø–µ—Ä–µ—Ö–æ–¥—É |
| Bifurcation score > 0.6 | –ê–∫—Ç–∏–≤–Ω—ã–π Proactive Mirroring |

**–¢—Ä–∏ –≤–µ–∫—Ç–æ—Ä–∞ –ø—Ä—ã–∂–∫–∞** (Semantic / Emotional Anchor / Zeigarnik Return) –æ–ø–∏—Å–∞–Ω—ã –≤ [attention-engagement-theory.md ¬ß5](./attention-engagement-theory.md).

---

## üèõÔ∏è –ì–æ–º–µ–æ—Å—Ç–∞–∑ –∏ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (Dashboard)

–°–∏—Å—Ç–µ–º–∞ —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç—Å—è —Ç—Ä–µ–º—è –≥–ª–∞–≤–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (—Å–ª–∞–π–¥–µ—Ä–∞–º–∏ –Ω–∞ –¥–∞—à–±–æ—Ä–¥–µ), –∫–æ—Ç–æ—Ä—ã–µ –≤–ª–∏—è—é—Ç –Ω–∞ –≤—Å–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã.

### 1. Chaos Level (–ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å)
`0.0 (–°—Ç–∞–±–∏–ª—å–Ω—ã–π) ... 1.0 (–•–∞–æ—Ç–∏—á–Ω—ã–π)`

–í–ª–∏—è–µ—Ç –Ω–∞:
- **Uncertainty Agent Boost**: `1.0 .. 3.0`.
- **TEC Switch Threshold**: `0.4 .. 0.2` (speed of switch).
- **Target PE**: `0.1 .. 0.5`.

### 2. Learning Speed (–°–∫–æ—Ä–æ—Å—Ç—å –ê–¥–∞–ø—Ç–∞—Ü–∏–∏)
`0.0 (–ú–µ–¥–ª–µ–Ω–Ω–æ) ... 1.0 (–ë—ã—Å—Ç—Ä–æ)`

–í–ª–∏—è–µ—Ç –Ω–∞:
- **Reinforcement Rate**: `0.02 .. 0.10`.
- **TEC base_decay**: `0.08 .. 0.18` (–±—ã—Å—Ç—Ä–æ–µ –æ–±—É—á–µ–Ω–∏–µ = –±—ã—Å—Ç—Ä—ã–π decay –≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç–∏).
- **Decay Rate**: `0.005 .. 0.020`.

### 3. Persistence (–¶–µ–ª–µ—É—Å—Ç—Ä–µ–º–ª—ë–Ω–Ω–æ—Å—Ç—å)
`0.0 (–†–∞—Å—Å–µ—è–Ω–Ω—ã–π) ... 1.0 (–£–ø–æ—Ä–Ω—ã–π)`

–í–ª–∏—è–µ—Ç –Ω–∞:
- **TEC Recovery Rate**: `0.02 .. 0.08` (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ TEC —É Task-—Ç–µ–º –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–∏).
- **Novelty Timeout**: `30 .. 10` —Ö–æ–¥–æ–≤.
- **Bifurcation Weight (Emotional Anchor)**: `0.2 .. 0.5`.

---

## üìä Empathy Alignment (EA)

**EA = 1.0 - PE** ‚Äî –∏–Ω–≤–µ—Ä—Å–∏—è Prediction Error.

| PE Range | State | Mood Changes | Agent Modifiers | TEC Effect | Action |
|----------|-------|--------------|-----------------|------------|--------|
| **<0.2** | ‚úÖ In Sync | `V:+0.05` | ‚Äî | Decay –≤—ã—Å–æ–∫–∏–π | Reinforce (if TEC > 0.5) |
| **0.2-0.5** | ‚ö™ Neutral | ‚Äî | ‚Äî | Decay –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π | No Change |
| **0.5-0.8** | ‚ö†Ô∏è Puzzled | `V:-0.05` | Social +15% | Decay –Ω–∏–∑–∫–∏–π (PE –≤—ã—Å–æ–∫–∏–π ‚Üí —Ç–µ–º–∞ —É–¥–∏–≤–ª—è–µ—Ç) | Weaken Pattern |
| **>=0.8** | üö® Lost | `V:-0.1` | Uncertainty Active | TEC —Ä–∞—Å—Ç—ë—Ç (reset) | Ask Question |

> –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: PE > 0.5 –Ω–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç decay TEC, –ø–æ—Å–∫–æ–ª—å–∫—É –≤—ã—Å–æ–∫–∏–π PE –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ç–µ–º–∞ **–µ—â—ë —É–¥–∏–≤–ª—è–µ—Ç** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

---

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

### Adaptive Homeostasis

1. **Multi-Armed Bandit (MAB)**: –í –Ω–∞—á–∞–ª–µ (–ø–µ—Ä–≤—ã–µ 200 –¥–∏–∞–ª–æ–≥–æ–≤) –ø—Ä–æ–±—É–µ—Ç —Ä–∞–∑–Ω—ã–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã.
2. **Adaptive Control**: –ü–æ—Å–ª–µ –Ω–∞–±–æ—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Ç `Quality`.

\[ Quality = f(AvgPE, DialogueLen, Engagement, PatternUse) \]

### Profile-Based Prediction

```
USER PROFILE (Emotional):
- Loves: Python (valence=0.9)
- Current TEC for 'Python': 0.31 (CAUTION: near bifurcation)

USER PROFILE (Behavioral):
- Late night -> Deep conversations (intensity=0.8)

TASK: Predict user's NEXT reply. If TEC < 0.3, also propose next topic.
```

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏

–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –ø–æ–ª—è –≤ `rcore_metrics`:

```json
{
  "tec_value": 0.73,
  "tec_decay_effective": 0.12,
  "lc_mode": "phasic",
  "bifurcation_detected": false,
  "bifurcation_vector": null,
  "predicted_next_topic": null
}
```

---

## üìñ –°—Å—ã–ª–∫–∏

- **–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è –±–∞–∑–∞**: [attention-engagement-theory.md](./attention-engagement-theory.md)
- **–ù–µ–π—Ä–æ–º–æ–¥—É–ª—è—Ü–∏—è (NE/DA/—Å–≤—è–∑—å —Å TEC)**: [neuromodulation-spec.md](./neuromodulation-spec.md)
- **–í–æ–ª–µ–≤—ã–µ —Ü–∏–∫–ª—ã –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è**: [volitional_micro_graphs.md](./volitional_micro_graphs.md)
- **Formative Anchors (Emotional Vector)**: [narrative-identity.md](./narrative-identity.md)
